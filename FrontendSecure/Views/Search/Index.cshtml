@model FrontendSecure.Models.SearchModel

@{
    ViewBag.Title = "Index";
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js">    </script>
}

<h2>Search</h2>
<ul class="nav nav-tabs" id="myTabs" role="tablist">
    <li role="presentation" class="active" id="AssetPane">
        <a href="#Asset" data-toggle="tab" id="idAsset">Assets <span class="badge">@Model.Assets.Count</span></a>
        
    </li>
    <li role="presentation"  id="UserPane">
        <a href="#User" data-toggle="tab" id="idUser">Users <span class="badge">@Model.Users.Count</span></a>
       
    </li>
    <li role="presentation"  id="CustomerPane">
        <a href="#Customer" data-toggle="tab" id="idCustomer">Customers <span class="badge">@Model.Customers.Count</span></a>
        
    </li>
</ul>
<div class="tab-content">
    <div class="tab-pane active"  id="Asset">


        <table class="table table-striped table-hover">
            <tr>
                <th>
                    Navn
                </th>
                <th>
                    Adresse
                </th>
                <th>
                    Bruger
                </th>
                <th>
                    Oprettet
                </th>
                <th>
                    Login
                </th>
                <th>
                    Password
                </th>
                <th>
                    IP adresse
                </th>
                <th></th>
            </tr>

            @foreach (var item in Model.Assets)
            {
                <tr>
                    <td>
                        @Html.DisplayFor(modelItem => item.Name)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Address)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Usedby)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.InstallationDate)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Login)
                    </td>
                    <td onmouseover="this.innerHTML = '@item.Password';" onmouseout="this.innerHTML = '••••••';">
                        ••••••
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.IpAddress)
                    </td>
                    <td>
                       
                    </td>
                </tr>
            }

        </table>
    </div>
    <div id="User" class="tab-pane">
        <table class="table table-striped table-hover">
            <tr>
                <th>Fornavn</th>
                <th>Efternavn</th>
                <th>Email</th>
                <th>Telefon nr.</th>
                <th>Password</th>
                <th></th>
            </tr>
            @foreach (var item in Model.Users)
            {
                <tr>
                    <td>@Html.DisplayFor(modelItem => item.FirstName)</td>
                    <td>@Html.DisplayFor(modelItem => item.LastName)</td>
                    <td>@Html.DisplayFor(modelItem => item.Email)</td>
                    <td>@Html.DisplayFor(modelItem => item.PhoneNumber)</td>
                    <td onmouseover="this.innerHTML = '@item.Password';" onmouseout="this.innerHTML = '••••••';">
                        ••••••
                    </td>
                    <td align="right">
                        <a class="btn btn-default" href="@Url.Action("Edit", "Users", new {id = item.Id})">
                            <span class="glyphicon glyphicon-pencil"
                                  aria-hidden="true"></span>
                        </a>
                        <a class="btn btn-danger" onclick="deleteUserClick(this)" data-id="@item.Id" data-name="@item.FirstName">

                            <span class="glyphicon glyphicon-trash"
                                  aria-hidden="true"></span>

                        </a>

                    </td>
                </tr>
            }
        </table>
    </div>
    <div id="Customer" class="tab-pane">
        <table class="table table-striped table-hover">
            <tr>
                <th>
                    Firma
                </th>
                <th>
                   Adresse
                </th>
                <th>
                    Dato
                </th>
                <th></th>
            </tr>

            @foreach (var item in Model.Customers)
            {
                <tr>
                    <td>
                        @Html.ActionLink(item.Firm, "Details", new { id = item.Id })
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Address)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Date)
                    </td>
                    <td>
                        <a class="btn btn-default" href="@Url.Action("Edit","Customers", new {id = item.Id})">
                            <span class="glyphicon glyphicon-pencil"
                                  aria-hidden="true"></span>
                        </a>
                        <a href="@Url.Action("Delete","Customers", new {id = item.Id})" class="btn btn-danger">
                            <span class="glyphicon glyphicon-trash"
                                  aria-hidden="true"></span>
                        </a>
                    </td>
                </tr>
            }

        </table>
    </div>
</div>

<script type="text/javascript">
    function TabShift() {
        setTimeout(function () {
            localStorage.setItem("paneactive", $("ul.nav-tabs li.active ").attr("id"));
            var element = document.querySelector(".tab-content .active");
            localStorage.setItem("contentactive", $(element).attr("id"));
            console.log(localStorage.getItem("contentactive"));
        }, 400);


    }
</script>
